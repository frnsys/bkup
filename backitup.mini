#!/bin/bash

# This script will back up these specified local directories to attached external HDDs.
# To add other harddrives, add them after the other drive names in the `for NAME` loop.

delete=""
if [[ $1 == "--delete" ]]
then
	echo "Are you sure you want to rsync with the delete flag? y/n"
	read a
	if [[ $a == "Y" || $a == "y" ]]; then
        delete="--delete"
	else
	  echo "Not doing it"
	fi
fi

# Back up to other mounted known drives.
for NAME in pony THX1189 Dump outerspace
do
    if [ `ls -1 /Volumes/ | grep $NAME` ]; then
        echo -e "\nDrive $NAME was found, backing up to it..."
        rsync -avu --progress $delete ~/Desktop/repos /Volumes/$NAME/francis

        # This does not delete files; you will have to manually clean them up.
        rsync -avu --progress ~/Desktop/archives /Volumes/$NAME/francis

        # Only certain drives have `tv` backed up to it.
        # Drive names here are space-delimited.
        # This does not delete files; you will have to manually clean them up.
        if [[ "pony Dump" == *"$NAME"* ]]; then
            rsync -avu --progress ~/Desktop/tv /Volumes/$NAME/francis
        fi
    fi
done
